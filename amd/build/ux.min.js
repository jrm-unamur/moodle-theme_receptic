define(["jquery","core/log"],function(a,b){"use strict";return{init:function(c){b.debug("UnamurUI AMD module initialized"),a(document).ready(function(a){var b=JSON.parse(c.sectionstoggle);setTimeout(function(){for(var c in b)c="#collapse-"+parseInt(c),a(c).collapse("show")},0),a(".summarytext").remove(),a('.block_myoverview [data-action="more-courses"]').removeClass("hidden"),a("body").on("click",".toggleblocks",function(){a("body").hasClass("noblocks")?M.util.set_user_preference("blocks-collapsed","false"):M.util.set_user_preference("blocks-collapsed","true"),a("body").toggleClass("noblocks")});var d=50,e=500;a(window).scroll(function(){a("body").scrollTop()>d?a("#back-to-top").fadeIn(e):a("#back-to-top").fadeOut(e)}),a("#back-to-top").click(function(b){return b.preventDefault(),a("html, body").animate({scrollTop:0},e),!1}),a("div.media").first().on("click",function(){return a("html, body").animate({scrollTop:150},50),!1}),a("div.media").on("click",function(b){var c=a(b.target).parent().parent().parent().attr("href"),d=c.substring(c.lastIndexOf("-")+1),e="#collapse-"+d;a(e).collapse("show")}),a(".collapse").on("show.bs.collapse",function(d){var e=a(d.target).attr("id"),f=e.substring(e.lastIndexOf("-")+1);b.hasOwnProperty(f)||(b[f]="true",M.util.set_user_preference("sections-toggle-"+c.course,JSON.stringify(b))),a(d.target).siblings("div.section-summary-activities").each(function(b,c){a(c).hide()})}),a(".collapse").on("hide.bs.collapse",function(d){var e=a(d.target).attr("id"),f=e.substring(e.lastIndexOf("-")+1);b.hasOwnProperty(f)&&(delete b[f],M.util.set_user_preference("sections-toggle-"+c.course,JSON.stringify(b))),a(d.target).siblings("div.section-summary-activities").each(function(b,c){a(c).show()})})})}}});