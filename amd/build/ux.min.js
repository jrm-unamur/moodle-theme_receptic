define(["jquery","core/log","core/ajax","core/notification","core/templates"],function(a,b,c,d,e){"use strict";var f;return{init:function(g){b.debug("Theme Receptic AMD module initialized"),a(document).ready(function(a){f=JSON.parse(g),f.displaymode&&a('.block-myoverview [data-region="courses-view"]').attr("data-display","list"),a(".linktotab").on("click",function(b){var c=a(b.currentTarget).attr("href");a('.nav-tabs a[href="#'+c.split("#")[1]+'"]').tab("show")}),a(".nav-tabs a").on("shown.bs.tab",function(a){history.pushState?history.pushState(null,null,a.target.hash):window.location.hash=a.target.hash});var b=!1,h=!1;a(document).keyup(function(a){17==a.which&&(b=!1),16==a.which&&(h=!1)}),a(document).keydown(function(c){17==c.which&&(b=!0),16==c.which&&(h=!0),120==c.which&&b&&h&&(a("body").hasClass("drawer-open-right")?M.util.set_user_preference("blocks-column-open","false"):M.util.set_user_preference("blocks-column-open","true"),a("body").toggleClass("drawer-open-right"))}),a("#page-course-edit:not(.format-site) #id_fullname").prop("readonly",!0),a("#page-course-edit:not(.format-site) #id_shortname").prop("readonly",!0),a("#page-course-edit:not(.format-site) #id_category").prop("readonly",!0),a("body").on("click",".hideflashbox1",function(b){b.preventDefault();var c=b.target;a(c).parent().parent().parent().slideUp(250),M.util.set_user_preference("flashbox1-hidden","true")}),a("body").on("click",".hideflashbox2",function(b){b.preventDefault();var c=b.target;a(c).parent().parent().parent().slideUp(250),M.util.set_user_preference("flashbox2-hidden","true")}),a("body").on("click",'[data-action="makevisible"]',function(b){b.preventDefault();var f=b.target,g=a(f).attr("data-course-id"),h=c.call([{methodname:"theme_receptic_change_course_visibility",args:{id:g,visible:!0}}]);h[0].done(function(){a(f).parent().fadeOut(400);var b=new Array;b.makevisiblesuccess=!0,b.coursehidden=!1,e.render("theme_receptic/coursewarnings",b).done(function(b){a(f).parent().replaceWith(b)}).fail(d.exception)}).fail(d.exception)});var i=200,j=700;if(a(window).scroll(function(){a(window).scrollTop()>i?a("#back-to-top").fadeIn(j):a("#back-to-top").fadeOut(j)}),a("#back-to-top").click(function(b){return b.preventDefault(),a("html, body").animate({scrollTop:0},j),!1}),a("#nav-drawer div.media").on("click",function(b){var c=a(b.target).parent().parent().parent().attr("href");if(c.lastIndexOf("#section-")!=-1){var d=c.substring(c.lastIndexOf("#section-")+1),e="#collapse-"+d;a(e).collapse("show")}}),a("#chooserform #item_lesson").parent().parent().remove(),f.pictureuploaddeactivated){var k=a("#page-user-edit #id_moodle_picture");if(k){var l=M.util.get_string("nopictureupload","theme_receptic"),m=a("#fitem_id_currentpicture").parent();a('<div class="alert alert-warning"><i class="fa fa-exclamation-circle fa-3x fa-pull-left mr-3"></i>'+l+"</div>").insertBefore(m),a("#fitem_id_imagefile").remove(),f.haspicture||a("#fitem_id_imagealt").remove()}}})}}});