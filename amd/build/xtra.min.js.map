{"version":3,"file":"xtra.min.js","sources":["../src/xtra.js"],"sourcesContent":["/**\n * Created by jmeuriss on 20/06/19.\n */\n/**\n * Created by jmeuriss on 3/02/16.\n */\n/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function($, log) {\n\n    \"use strict\";\n    return {\n        init: function() {\n            log.debug('Xtra AMD module initialized');\n\n            $(document).ready(function($) {\n                // Javascript to enable link to tab.\n                $('.linktotab').on('click', function(event) {\n                    var href = ($(event.currentTarget).attr('href'));\n                    $('.nav-tabs a[href=\"#' + href.split('#')[1] + '\"]').tab('show');\n                });\n\n                // With HTML5 history API, we can easily prevent scrolling!\n                // Activate only for passeports site.\n                /*$('.nav-tabs a').on('shown.bs.tab', function (e) {\n                    if(history.pushState) {\n                        console.log(e.target.hash);\n                        history.pushState(null, null, e.target.hash);\n                    } else {\n                        // Polyfill for old browsers.\n                        window.location.hash = e.target.hash;\n                    }\n                });*/\n\n                var isCtrl = false;\n                var isShift = false;\n                // Action on key up.\n                $(document).keyup(function(e) {\n                    if(e.which == 17) {\n                        isCtrl = false;\n                    }\n                    if(e.which == 16) {\n                        isShift = false;\n                    }\n                });\n                // Action on key down.\n                $(document).keydown(function(e) {\n                    if(e.which == 17) {\n                        isCtrl = true;\n                    }\n                    if(e.which == 16) {\n                        isShift = true;\n                    }\n                    if(e.which == 120 && isCtrl && isShift) {\n                        if($('body').hasClass('drawer-open-right')) {\n                            M.util.set_user_preference('blocks-column-open', 'false');\n                        } else {\n                            M.util.set_user_preference('blocks-column-open', 'true');\n                        }\n                        $('body').toggleClass('drawer-open-right');\n                    }\n                });\n\n                // Disable shortname, fullname and category in course edit form.\n                $('#page-course-edit:not(.format-site) #id_fullname').prop('readonly', true);\n                $('#page-course-edit:not(.format-site) #id_shortname').prop('readonly', true);\n                $('#page-course-edit:not(.format-site) #id_category').prop('readonly', true);\n\n                $('#chooserform #item_lesson').parent().parent().remove();\n                $('#chooserform input ~ span.typename:contains(\"Ubicast\")').parent().parent().remove();\n\n                $('.contactdpo').parent().parent().next().hide();\n                $('.contactdpo').parent().parent().next().next().hide();\n                $('.contactdpo').parent().parent().next().next().next().hide();\n                //$('[data-action=\"contactdpo\"]').parent().parent().next().hide();\n                //$('[data-action=\"contactdpo\"]').parent().parent().next().next().hide();\n                //$('[data-action=\"contactdpo\"]').parent().parent().next().next().next().hide();\n                //$('[data-action=\"contactdpo\"]').parent().parent().hide();\n                $('[data-action=\"contactdpo\"]').parent().parent().parent().children('li').hide();\n                $('[data-action=\"contactdpo\"]').parent().parent().parent().children('li').last().show();\n                $('#page-user-profile div.profile_tree section:nth-of-type(2n) ul').show();\n\n            });\n        }\n    };\n});\n/* jshint ignore:end */\n"],"names":["define","$","log","init","debug","document","ready","on","event","href","currentTarget","attr","split","tab","isCtrl","isShift","keyup","e","which","keydown","hasClass","M","util","set_user_preference","toggleClass","prop","parent","remove","next","hide","children","last","show"],"mappings":"AAOAA,OAAM,sBAAC,CAAC,SAAU,aAAa,SAASC,EAAGC,KAGhC,MAAA,CACHC,KAAM,WACFD,IAAIE,MAAM,+BAEVH,EAAEI,UAAUC,OAAM,SAASL,GAEvBA,EAAE,cAAcM,GAAG,SAAS,SAASC,OACjC,IAAIC,KAAQR,EAAEO,MAAME,eAAeC,KAAK,QACxCV,EAAE,sBAAwBQ,KAAKG,MAAM,KAAK,GAAK,MAAMC,IAAI,WAezDC,IAAAA,QAAS,EACTC,SAAU,EAEdd,EAAEI,UAAUW,OAAM,SAASC,GACT,IAAXA,EAAEC,QACDJ,QAAS,GAEC,IAAXG,EAAEC,QACDH,SAAU,MAIlBd,EAAEI,UAAUc,SAAQ,SAASF,GACX,IAAXA,EAAEC,QACDJ,QAAS,GAEC,IAAXG,EAAEC,QACDH,SAAU,GAEA,KAAXE,EAAEC,OAAgBJ,QAAUC,UACxBd,EAAE,QAAQmB,SAAS,qBAClBC,EAAEC,KAAKC,oBAAoB,qBAAsB,SAEjDF,EAAEC,KAAKC,oBAAoB,qBAAsB,QAErDtB,EAAE,QAAQuB,YAAY,yBAK9BvB,EAAE,oDAAoDwB,KAAK,YAAY,GACvExB,EAAE,qDAAqDwB,KAAK,YAAY,GACxExB,EAAE,oDAAoDwB,KAAK,YAAY,GAEvExB,EAAE,6BAA6ByB,SAASA,SAASC,SACjD1B,EAAE,0DAA0DyB,SAASA,SAASC,SAE9E1B,EAAE,eAAeyB,SAASA,SAASE,OAAOC,OAC1C5B,EAAE,eAAeyB,SAASA,SAASE,OAAOA,OAAOC,OACjD5B,EAAE,eAAeyB,SAASA,SAASE,OAAOA,OAAOA,OAAOC,OAKxD5B,EAAE,8BAA8ByB,SAASA,SAASA,SAASI,SAAS,MAAMD,OAC1E5B,EAAE,8BAA8ByB,SAASA,SAASA,SAASI,SAAS,MAAMC,OAAOC,OACjF/B,EAAE,kEAAkE+B"}