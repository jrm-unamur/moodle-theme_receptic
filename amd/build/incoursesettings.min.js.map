{"version":3,"file":"incoursesettings.min.js","sources":["../src/incoursesettings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Receptic - JS code for displaying course setting within the course.\n * Cloned from Theme Boost Campus\n *\n * @module     theme_receptic\n * @copyright  2017 Kathrin Osswald, Ulm University <kathrin.osswald@uni-ulm.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    \"use strict\";\n\n    /**\n     * Initialising.\n     */\n    function initInCourseSettings() {\n        var courseSettings = $('#theme-receptic-course-settings-card');\n        var activitySettings = $('#theme-receptic-activity-settings-card');\n        var frontpage = $('body').hasClass('pagelayout-frontpage') || $('body').hasClass('page-layout-mypublic');\n\n        // Only change the behaviour if the setting is enabled and we are not on the frontpage,\n        // because we did not change the settings menu there. So we need the default propagation here.\n        if (!frontpage) {\n            $('#page-header .context-header-settings-menu .action-menu-trigger .dropdown .dropdown-menu').remove();\n            $('#page-header .context-header-settings-menu').on('click', function(event) {\n                event.stopPropagation();\n                if (courseSettings.is(\":visible\")) {\n                    courseSettings.fadeOut(400);\n                } else {\n                    courseSettings.fadeIn(600);\n                    // Additionally close activity settings if they are currently open.\n                    if (activitySettings.is(\":visible\")) {\n                        activitySettings.fadeOut(400);\n                    }\n                }\n            });\n            $('#region-main-settings-menu .action-menu .dropdown-toggle').on('click', function(event) {\n                event.stopPropagation();\n                if (activitySettings.is(\":visible\")) {\n                    activitySettings.fadeOut(400);\n                } else {\n                    activitySettings.fadeIn(400);\n                    // Additionally close course settings if they are currently open.\n                    if (courseSettings.is(\":visible\")) {\n                        courseSettings.fadeOut(400);\n                    }\n                }\n            });\n        }\n    }\n\n    return {\n        init: function() {\n            initInCourseSettings();\n        }\n    };\n});\n"],"names":["define","$","init","courseSettings","activitySettings","hasClass","remove","on","event","stopPropagation","is","fadeOut","fadeIn"],"mappings":";;;;;;;;AAwBAA,yCAAO,CAAC,WAAW,SAASC,GA0CjB,MAAA,CACHC,KAAM,WArCV,IACQC,eACAC,iBADAD,eAAiBF,EAAE,wCACnBG,iBAAmBH,EAAE,0CACTA,EAAE,QAAQI,SAAS,yBAA2BJ,EAAE,QAAQI,SAAS,0BAK7EJ,EAAE,4FAA4FK,SAC9FL,EAAE,8CAA8CM,GAAG,SAAS,SAASC,OACjEA,MAAMC,kBACFN,eAAeO,GAAG,YAClBP,eAAeQ,QAAQ,MAEvBR,eAAeS,OAAO,KAElBR,iBAAiBM,GAAG,aACpBN,iBAAiBO,QAAQ,SAIrCV,EAAE,4DAA4DM,GAAG,SAAS,SAASC,OAC/EA,MAAMC,kBACFL,iBAAiBM,GAAG,YACpBN,iBAAiBO,QAAQ,MAEzBP,iBAAiBQ,OAAO,KAEpBT,eAAeO,GAAG,aAClBP,eAAeQ,QAAQ"}