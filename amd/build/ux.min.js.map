{"version":3,"file":"ux.min.js","sources":["../src/ux.js"],"sourcesContent":["/**\n * Created by jmeuriss on 3/02/16.\n */\n/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'core/ajax', 'core/notification', 'core/templates'], function($, log, ajax, notification, templates) {\n\n    \"use strict\";\n    var params;\n    return {\n        init: function(args) {\n            log.debug('Theme Receptic AMD module initialized!');\n\n            $(document).ready(function($) {\n                params = JSON.parse(args);\n\n                $('body').on('click', '.hideflashbox1', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox1-hidden', 'true');\n                });\n\n                $('body').on('click', '.hideflashbox2', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox2-hidden', 'true');\n                });\n\n                $('body').on('click', '[data-action=\"makevisible\"]', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    var courseId = $(target).attr('data-course-id');\n                    var promises = ajax.call([{\n                        methodname: 'theme_receptic_change_course_visibility',\n                        args: {\n                            'id': courseId,\n                            'visible': true\n                        }\n                    }]);\n                    promises[0]\n                        .done(function() {\n                            $(target).parent().fadeOut(400);\n                            var datafortpl = new Array();\n                            datafortpl.makevisiblesuccess = true;\n                            datafortpl.coursehidden = false;\n\n                            templates.render('theme_receptic/coursewarnings', datafortpl).done(function(html) {\n                                $(target).parent().replaceWith(html);\n                            }).fail(notification.exception);\n                        }).fail(notification.exception);\n                });\n\n                var offset = 200;\n                var duration = 700;\n                $(window).scroll(function(){\n                    if ($(window).scrollTop() > offset) {\n                        $('#back-to-top').fadeIn(duration);\n                    } else {\n                        $('#back-to-top').fadeOut(duration);\n                    }\n                });\n                $('#back-to-top').click(function (event) {\n                    event.preventDefault();\n                    $('html, body').animate({scrollTop: 0}, duration);\n                    return false;\n                });\n\n                $('#nav-drawer div.media').on('click', function(event) {\n                    var href = $(event.target).parent().parent().parent().attr('href');\n\n                    if( href && href.lastIndexOf('#section-') != -1) {\n\n                        var index = href.substring(href.lastIndexOf('#section-') + 1);\n\n                        var attr = '#collapse-' + index;\n\n                        $(attr).collapse('show');\n                    }\n\n                });\n\n\n                if (params.pictureuploaddeactivated) {\n                    var edituserpicturefieldset = $('#page-user-edit #id_moodle_picture');\n                    if (edituserpicturefieldset) {\n                        var message = M.util.get_string('nopictureupload', 'theme_receptic');\n                        var afterelement = $('#fitem_id_currentpicture').parent();\n                        $('<div class=\"alert alert-warning\">' +\n                            '<i class=\"fa fa-exclamation-circle fa-3x fa-pull-left mr-3\"></i>' +\n                            message +\n                            '</div>').insertBefore(afterelement);\n                        $('#fitem_id_imagefile').remove();\n                        if (!params.haspicture) {\n                            $('#fitem_id_imagealt').remove();\n                        }\n                    }\n                }\n            });\n        }\n    };\n});\n/* jshint ignore:end */\n"],"names":["define","$","log","ajax","notification","templates","params","init","args","debug","document","ready","JSON","parse","on","event","preventDefault","target","parent","slideUp","M","util","set_user_preference","courseId","attr","call","methodname","id","visible","done","fadeOut","datafortpl","Array","makevisiblesuccess","coursehidden","render","html","replaceWith","fail","exception","window","scroll","scrollTop","fadeIn","click","animate","href","lastIndexOf","index","substring","collapse","pictureuploaddeactivated","message","get_string","afterelement","insertBefore","remove","haspicture"],"mappings":"AAIAA,OAAM,oBAAC,CAAC,SAAU,WAAY,YAAa,oBAAqB,mBAAmB,SAASC,EAAGC,IAAKC,KAAMC,aAAcC,WAGpH,IAAIC,OACG,MAAA,CACHC,KAAM,SAASC,MACXN,IAAIO,MAAM,0CAEVR,EAAES,UAAUC,OAAM,SAASV,GACvBK,OAASM,KAAKC,MAAML,MAEpBP,EAAE,QAAQa,GAAG,QAAS,kBAAkB,SAASC,OAC7CA,MAAMC,iBACN,IAAIC,OAASF,MAAME,OACnBhB,EAAEgB,QAAQC,SAASA,SAASA,SAASC,QAAQ,KAC7CC,EAAEC,KAAKC,oBAAoB,mBAAoB,WAGnDrB,EAAE,QAAQa,GAAG,QAAS,kBAAkB,SAASC,OAC7CA,MAAMC,iBACN,IAAIC,OAASF,MAAME,OACnBhB,EAAEgB,QAAQC,SAASA,SAASA,SAASC,QAAQ,KAC7CC,EAAEC,KAAKC,oBAAoB,mBAAoB,WAGnDrB,EAAE,QAAQa,GAAG,QAAS,+BAA+B,SAASC,OAC1DA,MAAMC,iBACN,IAAIC,OAASF,MAAME,OACfM,SAAWtB,EAAEgB,QAAQO,KAAK,kBACfrB,KAAKsB,KAAK,CAAC,CACtBC,WAAY,0CACZlB,KAAM,CACFmB,GAAMJ,SACKK,SAAA,MAGV,GACJC,MAAK,WACF5B,EAAEgB,QAAQC,SAASY,QAAQ,KAC3B,IAAIC,WAAa,IAAIC,MACrBD,WAAWE,oBAAqB,EAChCF,WAAWG,cAAe,EAE1B7B,UAAU8B,OAAO,gCAAiCJ,YAAYF,MAAK,SAASO,MACxEnC,EAAEgB,QAAQC,SAASmB,YAAYD,SAChCE,KAAKlC,aAAamC,cACtBD,KAAKlC,aAAamC,cAiCzBjC,IA5BJL,EAAEuC,QAAQC,QAAO,WACTxC,EAAEuC,QAAQE,YAHL,IAILzC,EAAE,gBAAgB0C,OAHX,KAKP1C,EAAE,gBAAgB6B,QALX,QAQf7B,EAAE,gBAAgB2C,OAAM,SAAU7B,OAG9B,OAFAA,MAAMC,iBACNf,EAAE,cAAc4C,QAAQ,CAACH,UAAW,GAVzB,MAWJ,KAGXzC,EAAE,yBAAyBa,GAAG,SAAS,SAASC,OAC5C,IAAI+B,KAAO7C,EAAEc,MAAME,QAAQC,SAASA,SAASA,SAASM,KAAK,QAEvDsB,GAAAA,OAA0C,GAAlCA,KAAKC,YAAY,aAAoB,CAE7C,IAAIC,MAAQF,KAAKG,UAAUH,KAAKC,YAAY,aAAe,GAI3D9C,EAFW,aAAe+C,OAElBE,SAAS,YAMrB5C,OAAO6C,2BACuBlD,EAAE,sCACH,CACrBmD,IAAAA,QAAUhC,EAAEC,KAAKgC,WAAW,kBAAmB,kBAC/CC,aAAerD,EAAE,4BAA4BiB,SACjDjB,EAAE,oGAEEmD,QACA,UAAUG,aAAaD,cAC3BrD,EAAE,uBAAuBuD,SACpBlD,OAAOmD,YACRxD,EAAE,sBAAsBuD"}