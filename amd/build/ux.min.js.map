{"version":3,"sources":["../src/ux.js"],"names":["define","$","log","ajax","notification","templates","params","init","args","debug","document","ready","JSON","parse","on","event","preventDefault","target","parent","slideUp","M","util","set_user_preference","courseId","attr","promises","call","methodname","done","fadeOut","datafortpl","makevisiblesuccess","coursehidden","render","html","replaceWith","fail","exception","duration","window","scroll","scrollTop","fadeIn","click","animate","href","lastIndexOf","index","substring","collapse","pictureuploaddeactivated","edituserpicturefieldset","message","get_string","afterelement","insertBefore","remove","haspicture"],"mappings":"AAIAA,OAAM,qBAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,WAAvB,CAAoC,mBAApC,CAAyD,gBAAzD,CAAD,CAA6E,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAuBC,CAAvB,CAAqCC,CAArC,CAAgD,CAE/H,aACA,GAAIC,CAAAA,CAAJ,CACA,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAe,CACjBN,CAAG,CAACO,KAAJ,CAAU,wCAAV,EAEAR,CAAC,CAACS,QAAD,CAAD,CAAYC,KAAZ,CAAkB,SAASV,CAAT,CAAY,CAC1BK,CAAM,CAAGM,IAAI,CAACC,KAAL,CAAWL,CAAX,CAAT,CAEAP,CAAC,CAAC,MAAD,CAAD,CAAUa,EAAV,CAAa,OAAb,CAAsB,gBAAtB,CAAwC,SAASC,CAAT,CAAgB,CACpDA,CAAK,CAACC,cAAN,GACA,GAAIC,CAAAA,CAAM,CAAGF,CAAK,CAACE,MAAnB,CACAhB,CAAC,CAACgB,CAAD,CAAD,CAAUC,MAAV,GAAmBA,MAAnB,GAA4BA,MAA5B,GAAqCC,OAArC,CAA6C,GAA7C,EACAC,CAAC,CAACC,IAAF,CAAOC,mBAAP,CAA2B,kBAA3B,CAA+C,MAA/C,CACH,CALD,EAOArB,CAAC,CAAC,MAAD,CAAD,CAAUa,EAAV,CAAa,OAAb,CAAsB,gBAAtB,CAAwC,SAASC,CAAT,CAAgB,CACpDA,CAAK,CAACC,cAAN,GACA,GAAIC,CAAAA,CAAM,CAAGF,CAAK,CAACE,MAAnB,CACAhB,CAAC,CAACgB,CAAD,CAAD,CAAUC,MAAV,GAAmBA,MAAnB,GAA4BA,MAA5B,GAAqCC,OAArC,CAA6C,GAA7C,EACAC,CAAC,CAACC,IAAF,CAAOC,mBAAP,CAA2B,kBAA3B,CAA+C,MAA/C,CACH,CALD,EAOArB,CAAC,CAAC,MAAD,CAAD,CAAUa,EAAV,CAAa,OAAb,CAAsB,+BAAtB,CAAqD,SAASC,CAAT,CAAgB,CACjEA,CAAK,CAACC,cAAN,GADiE,GAE7DC,CAAAA,CAAM,CAAGF,CAAK,CAACE,MAF8C,CAG7DM,CAAQ,CAAGtB,CAAC,CAACgB,CAAD,CAAD,CAAUO,IAAV,CAAe,gBAAf,CAHkD,CAI7DC,CAAQ,CAAGtB,CAAI,CAACuB,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,yCADU,CAEtBnB,IAAI,CAAE,CACF,GAAMe,CADJ,CAEF,UAFE,CAFgB,CAAD,CAAV,CAJkD,CAWjEE,CAAQ,CAAC,CAAD,CAAR,CACKG,IADL,CACU,UAAW,CACb3B,CAAC,CAACgB,CAAD,CAAD,CAAUC,MAAV,GAAmBW,OAAnB,CAA2B,GAA3B,EACA,GAAIC,CAAAA,CAAU,GAAd,CACAA,CAAU,CAACC,kBAAX,IACAD,CAAU,CAACE,YAAX,IAEA3B,CAAS,CAAC4B,MAAV,CAAiB,+BAAjB,CAAkDH,CAAlD,EAA8DF,IAA9D,CAAmE,SAASM,CAAT,CAAe,CAC9EjC,CAAC,CAACgB,CAAD,CAAD,CAAUC,MAAV,GAAmBiB,WAAnB,CAA+BD,CAA/B,CACH,CAFD,EAEGE,IAFH,CAEQhC,CAAY,CAACiC,SAFrB,CAGH,CAVL,EAUOD,IAVP,CAUYhC,CAAY,CAACiC,SAVzB,CAWH,CAtBD,EAjB0B,GA0CtBC,CAAAA,CAAQ,CAAG,GA1CW,CA2C1BrC,CAAC,CAACsC,MAAD,CAAD,CAAUC,MAAV,CAAiB,UAAU,CACvB,GAAIvC,CAAC,CAACsC,MAAD,CAAD,CAAUE,SAAV,MAAJ,CAAoC,CAChCxC,CAAC,CAAC,cAAD,CAAD,CAAkByC,MAAlB,CAAyBJ,CAAzB,CACH,CAFD,IAEO,CACHrC,CAAC,CAAC,cAAD,CAAD,CAAkB4B,OAAlB,CAA0BS,CAA1B,CACH,CACJ,CAND,EAOArC,CAAC,CAAC,cAAD,CAAD,CAAkB0C,KAAlB,CAAwB,SAAU5B,CAAV,CAAiB,CACrCA,CAAK,CAACC,cAAN,GACAf,CAAC,CAAC,YAAD,CAAD,CAAgB2C,OAAhB,CAAwB,CAACH,SAAS,CAAE,CAAZ,CAAxB,CAAwCH,CAAxC,EACA,QACH,CAJD,EAMArC,CAAC,CAAC,uBAAD,CAAD,CAA2Ba,EAA3B,CAA8B,OAA9B,CAAuC,SAASC,CAAT,CAAgB,CACnD,GAAI8B,CAAAA,CAAI,CAAG5C,CAAC,CAACc,CAAK,CAACE,MAAP,CAAD,CAAgBC,MAAhB,GAAyBA,MAAzB,GAAkCA,MAAlC,GAA2CM,IAA3C,CAAgD,MAAhD,CAAX,CAEA,GAAqC,CAAC,CAAlC,EAAAqB,CAAI,CAACC,WAAL,CAAiB,WAAjB,CAAJ,CAAyC,IAEjCC,CAAAA,CAAK,CAAGF,CAAI,CAACG,SAAL,CAAeH,CAAI,CAACC,WAAL,CAAiB,WAAjB,EAAgC,CAA/C,CAFyB,CAMrC7C,CAAC,CAFU,aAAe8C,CAEzB,CAAD,CAAQE,QAAR,CAAiB,MAAjB,CACH,CAEJ,CAZD,EAcA,GAAI3C,CAAM,CAAC4C,wBAAX,CAAqC,CACjC,GAAIC,CAAAA,CAAuB,CAAGlD,CAAC,CAAC,oCAAD,CAA/B,CACA,GAAIkD,CAAJ,CAA6B,IACrBC,CAAAA,CAAO,CAAGhC,CAAC,CAACC,IAAF,CAAOgC,UAAP,CAAkB,iBAAlB,CAAqC,gBAArC,CADW,CAErBC,CAAY,CAAGrD,CAAC,CAAC,0BAAD,CAAD,CAA8BiB,MAA9B,EAFM,CAGzBjB,CAAC,CAAC,wGAEEmD,CAFF,CAGE,QAHH,CAAD,CAGcG,YAHd,CAG2BD,CAH3B,EAIArD,CAAC,CAAC,qBAAD,CAAD,CAAyBuD,MAAzB,GACA,GAAI,CAAClD,CAAM,CAACmD,UAAZ,CAAwB,CACpBxD,CAAC,CAAC,oBAAD,CAAD,CAAwBuD,MAAxB,EACH,CACJ,CACJ,CACJ,CArFD,CAsFH,CA1FE,CA4FV,CAhGK,CAAN","sourcesContent":["/**\n * Created by jmeuriss on 3/02/16.\n */\n/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'core/ajax', 'core/notification', 'core/templates'], function($, log, ajax, notification, templates) {\n\n    \"use strict\";\n    var params;\n    return {\n        init: function(args) {\n            log.debug('Theme Receptic AMD module initialized!');\n\n            $(document).ready(function($) {\n                params = JSON.parse(args);\n\n                $('body').on('click', '.hideflashbox1', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox1-hidden', 'true');\n                });\n\n                $('body').on('click', '.hideflashbox2', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox2-hidden', 'true');\n                });\n\n                $('body').on('click', '[data-action=\"makevisible\"]', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    var courseId = $(target).attr('data-course-id');\n                    var promises = ajax.call([{\n                        methodname: 'theme_receptic_change_course_visibility',\n                        args: {\n                            'id': courseId,\n                            'visible': true\n                        }\n                    }]);\n                    promises[0]\n                        .done(function() {\n                            $(target).parent().fadeOut(400);\n                            var datafortpl = new Array();\n                            datafortpl.makevisiblesuccess = true;\n                            datafortpl.coursehidden = false;\n\n                            templates.render('theme_receptic/coursewarnings', datafortpl).done(function(html) {\n                                $(target).parent().replaceWith(html);\n                            }).fail(notification.exception);\n                        }).fail(notification.exception);\n                });\n\n                var offset = 200;\n                var duration = 700;\n                $(window).scroll(function(){\n                    if ($(window).scrollTop() > offset) {\n                        $('#back-to-top').fadeIn(duration);\n                    } else {\n                        $('#back-to-top').fadeOut(duration);\n                    }\n                });\n                $('#back-to-top').click(function (event) {\n                    event.preventDefault();\n                    $('html, body').animate({scrollTop: 0}, duration);\n                    return false;\n                });\n\n                $('#nav-drawer div.media').on('click', function(event) {\n                    var href = $(event.target).parent().parent().parent().attr('href');\n\n                    if( href.lastIndexOf('#section-') != -1) {\n\n                        var index = href.substring(href.lastIndexOf('#section-') + 1);\n\n                        var attr = '#collapse-' + index;\n\n                        $(attr).collapse('show');\n                    }\n\n                });\n\n                if (params.pictureuploaddeactivated) {\n                    var edituserpicturefieldset = $('#page-user-edit #id_moodle_picture');\n                    if (edituserpicturefieldset) {\n                        var message = M.util.get_string('nopictureupload', 'theme_receptic');\n                        var afterelement = $('#fitem_id_currentpicture').parent();\n                        $('<div class=\"alert alert-warning\">' +\n                            '<i class=\"fa fa-exclamation-circle fa-3x fa-pull-left mr-3\"></i>' +\n                            message +\n                            '</div>').insertBefore(afterelement);\n                        $('#fitem_id_imagefile').remove();\n                        if (!params.haspicture) {\n                            $('#fitem_id_imagealt').remove();\n                        }\n                    }\n                }\n            });\n        }\n    };\n});\n/* jshint ignore:end */\n"],"file":"ux.min.js"}