{"version":3,"sources":["../src/ux.js"],"names":["define","$","log","ajax","notification","templates","params","init","args","debug","document","ready","JSON","parse","displaymode","attr","on","event","preventDefault","target","parent","slideUp","M","util","set_user_preference","courseId","promises","call","methodname","done","fadeOut","datafortpl","makevisiblesuccess","coursehidden","render","html","replaceWith","fail","exception","duration","window","scroll","scrollTop","fadeIn","click","animate","href","lastIndexOf","index","substring","collapse","pictureuploaddeactivated","edituserpicturefieldset","message","get_string","afterelement","insertBefore","remove","haspicture"],"mappings":"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","sourcesContent":["/**\n * Created by jmeuriss on 3/02/16.\n */\n/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'core/ajax', 'core/notification', 'core/templates'], function($, log, ajax, notification, templates) {\n\n    \"use strict\";\n    var params;\n    return {\n        init: function(args) {\n            log.debug('Theme Receptic AMD module initialized');\n\n            $(document).ready(function($) {\n                params = JSON.parse(args);\n                if (params.displaymode) {\n                    $('.block-myoverview [data-region=\"courses-view\"]').attr('data-display', params.displaymode);\n                }\n\n                $('body').on('click', '.hideflashbox1', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox1-hidden', 'true');\n                });\n\n                $('body').on('click', '.hideflashbox2', function(event) {\n                    event.preventDefault();\n                    var target = event.target;\n                    $(target).parent().parent().parent().slideUp(250);\n                    M.util.set_user_preference('flashbox2-hidden', 'true');\n                });\n\n                $('body').on('click', '[data-action=\"makevisible\"]', function(event) {\n\n                    event.preventDefault();\n                    var target = event.target;\n                    var courseId = $(target).attr('data-course-id');\n                    var promises = ajax.call([{\n                        methodname: 'theme_receptic_change_course_visibility',\n                        args: {\n                            'id': courseId,\n                            'visible': true\n                        }\n                    }]);\n                    promises[0]\n                        .done(function() {\n                            $(target).parent().fadeOut(400);\n                            var datafortpl = new Array();\n                            datafortpl.makevisiblesuccess = true;\n                            datafortpl.coursehidden = false;\n\n                            templates.render('theme_receptic/coursewarnings', datafortpl).done(function(html) {\n                                $(target).parent().replaceWith(html);\n                            }).fail(notification.exception);\n                        }).fail(notification.exception);\n                });\n\n                var offset = 200;\n                var duration = 700;\n                $(window).scroll(function(){\n                    if ($(window).scrollTop() > offset) {\n                        $('#back-to-top').fadeIn(duration);\n                    } else {\n                        $('#back-to-top').fadeOut(duration);\n                    }\n                });\n                $('#back-to-top').click(function (event) {\n                    event.preventDefault();\n                    $('html, body').animate({scrollTop: 0}, duration);\n                    return false;\n                });\n\n                $('#nav-drawer div.media').on('click', function(event) {\n                    var href = $(event.target).parent().parent().parent().attr('href');\n\n                    if( href.lastIndexOf('#section-') != -1) {\n\n                        var index = href.substring(href.lastIndexOf('#section-') + 1);\n\n                        var attr = '#collapse-' + index;\n\n                        $(attr).collapse('show');\n                    }\n\n                });\n\n                if (params.pictureuploaddeactivated) {\n                    var edituserpicturefieldset = $('#page-user-edit #id_moodle_picture');\n                    if (edituserpicturefieldset) {\n                        var message = M.util.get_string('nopictureupload', 'theme_receptic');\n                        var afterelement = $('#fitem_id_currentpicture').parent();\n                        $('<div class=\"alert alert-warning\">' +\n                            '<i class=\"fa fa-exclamation-circle fa-3x fa-pull-left mr-3\"></i>' +\n                            message +\n                            '</div>').insertBefore(afterelement);\n                        $('#fitem_id_imagefile').remove();\n                        if (!params.haspicture) {\n                            $('#fitem_id_imagealt').remove();\n                        }\n                    }\n                }\n            });\n        }\n    };\n});\n/* jshint ignore:end */\n"],"file":"ux.min.js"}